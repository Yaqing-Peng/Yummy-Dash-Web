(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13081ae8"],{"0ba6":function(e,t,a){"use strict";a("6c3a")},"0f65":function(e,t,a){"use strict";a("d52c")},"20d6":function(e,t,a){"use strict";var r=a("5ca1"),n=a("0a49")(6),o="findIndex",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),r(r.P+r.F*i,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},"38b88":function(e,t,a){"use strict";a.d(t,"g",(function(){return c})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"f",(function(){return f})),a.d(t,"i",(function(){return p})),a.d(t,"d",(function(){return v})),a.d(t,"c",(function(){return b}));a("8e6e"),a("ac6a"),a("456d");var r=a("bd86"),n=a("b32d");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e){return Object(n["a"])({url:"/dish/page",method:"get",params:e})},s=function(e){return Object(n["a"])({url:"/dish",method:"delete",params:{ids:e}})},l=function(e){return Object(n["a"])({url:"/dish",method:"put",data:i({},e)})},u=function(e){return Object(n["a"])({url:"/dish",method:"post",data:i({},e)})},d=function(e){return Object(n["a"])({url:"/dish/".concat(e),method:"get"})},f=function(e){return Object(n["a"])({url:"/category/list",method:"get",params:e})},p=function(e){return Object(n["a"])({url:"/dish/list",method:"get",params:e})},v=function(e){return Object(n["a"])({url:"/dish/status/".concat(e.status),method:"post",params:{id:e.id}})},b=function(e){return Object(n["a"])({url:"/category/list",method:"get",params:i({},e)})}},"503a":function(e,t,a){"use strict";a("e421")},"5aa9":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"upload-item"},[t("el-upload",{ref:"uploadfiles",staticClass:"avatar-uploader",class:{borderNone:e.imageUrl},attrs:{accept:e.type,action:"/api/common/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-remove":e.handleRemove,"on-error":e.handleError,"before-upload":e.beforeAvatarUpload,headers:e.headers}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e.imageUrl?t("span",{staticClass:"el-upload-list__item-actions"},[t("span",{staticClass:"el-upload-span",on:{click:function(t){return t.stopPropagation(),e.oploadImgDel.apply(null,arguments)}}},[e._v("\n        删除图片\n      ")]),t("span",{staticClass:"el-upload-span"},[e._v(" 重新上传 ")])]):e._e()]),t("p",{staticClass:"upload-tips"},[e._t("default")],2)],1)},n=[],o=(a("2397"),a("d225")),i=a("b0b4"),c=a("308d"),s=a("6bb5"),l=a("4e2b"),u=a("bd86"),d=a("9ab4"),f=a("60a3"),p=a("5581");function v(e,t,a){return t=Object(s["a"])(t),Object(c["a"])(e,b()?Reflect.construct(t,a||[],Object(s["a"])(e).constructor):t.apply(e,a))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var h=function(e){function t(){var e;Object(o["a"])(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return e=v(this,t,[].concat(r)),Object(u["a"])(e,"type",void 0),Object(u["a"])(e,"size",void 0),Object(u["a"])(e,"propImageUrl",void 0),Object(u["a"])(e,"headers",{token:Object(p["b"])()}),Object(u["a"])(e,"imageUrl",""),e}return Object(l["a"])(t,e),Object(i["a"])(t,[{key:"handleRemove",value:function(){}},{key:"onChange",value:function(e){this.imageUrl=e}},{key:"handleError",value:function(e,t,a){console.log(e,t,a,"handleError"),this.$message({message:"图片上传失败",type:"error"})}},{key:"handleAvatarSuccess",value:function(e,t,a){this.imageUrl="".concat(e.data),this.$emit("imageChange",this.imageUrl)}},{key:"oploadImgDel",value:function(){this.imageUrl="",this.$emit("imageChange",this.imageUrl)}},{key:"beforeAvatarUpload",value:function(e){var t=e.size/1024/1024<this.size;if(!t)return this.$message({message:"上传文件大小不能超过".concat(this.size,"M!"),type:"error"}),!1}}])}(f["c"]);Object(d["a"])([Object(f["b"])({default:".jpg,.jpeg,.png"})],h.prototype,"type",void 0),Object(d["a"])([Object(f["b"])({default:2})],h.prototype,"size",void 0),Object(d["a"])([Object(f["b"])({default:""})],h.prototype,"propImageUrl",void 0),Object(d["a"])([Object(f["d"])("propImageUrl")],h.prototype,"onChange",null),h=Object(d["a"])([Object(f["a"])({name:"UploadImage"})],h);var m=h,g=m,O=(a("a100"),a("503a"),a("2877")),y=Object(O["a"])(g,r,n,!1,null,"3a78313f",null);t["a"]=y.exports},"5dbc":function(e,t,a){var r=a("d3f4"),n=a("8b97").set;e.exports=function(e,t,a){var o,i=t.constructor;return i!==a&&"function"==typeof i&&(o=i.prototype)!==a.prototype&&r(o)&&n&&n(e,o),e}},"6c3a":function(e,t,a){},"7dfb":function(e,t,a){"use strict";a("8677")},8677:function(e,t,a){},"8b97":function(e,t,a){var r=a("d3f4"),n=a("cb7c"),o=function(e,t){if(n(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(e,a){return o(e,a),t?e.__proto__=a:r(e,a),e}}({},!1):void 0),check:o}},a100:function(e,t,a){"use strict";a("ec28")},aa77:function(e,t,a){var r=a("5ca1"),n=a("be13"),o=a("79e5"),i=a("fdef"),c="["+i+"]",s="​",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(e,t,a){var n={},c=o((function(){return!!i[e]()||s[e]()!=s})),l=n[e]=c?t(f):i[e];a&&(n[a]=l),r(r.P+r.F*c,"String",n)},f=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b899:function(e,t,a){},c5f6:function(e,t,a){"use strict";var r=a("7726"),n=a("69a8"),o=a("2d95"),i=a("5dbc"),c=a("6a99"),s=a("79e5"),l=a("9093").f,u=a("11e9").f,d=a("86cc").f,f=a("aa77").trim,p="Number",v=r[p],b=v,h=v.prototype,m=o(a("2aeb")(h))==p,g="trim"in String.prototype,O=function(e){var t=c(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var a,r,n,o=t.charCodeAt(0);if(43===o||45===o){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t}for(var i,s=t.slice(2),l=0,u=s.length;l<u;l++)if(i=s.charCodeAt(l),i<48||i>n)return NaN;return parseInt(s,r)}}return+t};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof v&&(m?s((function(){h.valueOf.call(a)})):o(a)!=p)?i(new b(O(t)),a,v):O(t)};for(var y,j=a("9e1e")?l(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;j.length>F;F++)n(b,y=j[F])&&!n(v,y)&&d(v,y,u(b,y));v.prototype=h,h.constructor=v,a("2aba")(r,p,v)}},d4eb:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAqCAYAAADBNhlmAAABcElEQVRYR+3YwUrDQBAG4JlS8e7BU1QqyaUN4iP4LCoo3n0J79aD4tW7D1DyBkUhCBqIggcfwYN0JGraWjbdTXbZGUpyTXbz5d/sZrIIwg8U7oMWaDtCbYKiEgzDvSAINj6SJPmyhZXtnQwxEWEvHAwB4AQBnne2NmNXSGvgDy4a3ADB4d9TUxe721n2+O4iRSugAgeAePWapWcucEUfjYFqHNzmL+kxIhIr0BeuUYI+cbWBvnG1gBw4YyAXzgjIidMCuXFLgRJwlcBfXH8EhAdzC+64g517VwvwrJ/JJ62t3+VP4zdV38ovSS/qX9AEzt1j1D0i4kOepfurAxQ/xEXUBXI3iq+J6GgaPbovBnSv0dJqRgJSW25xI7VA7uE2ApbIhdK+KHedF6iL76QxkAtZC8iBrA30jWwE9IlsDKxGCvntLGeb6B/3/8j4EohOxW19zK9bYjePdB98m/NWk8TmxqZtW6BpUlXXtQnaJvgN7kUqOhRI5j0AAAAASUVORK5CYII="},d52c:function(e,t,a){},d666:function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"HeadLable"},[e.goback?t("span",{staticClass:"goBack",on:{click:function(t){return e.goBack()}}},[t("img",{attrs:{src:a("d4eb"),alt:""}}),e._v(" Return")]):e._e(),e.butList?e._e():t("span",[e._v(e._s(e.title))]),e.butList?t("div",[e._t("default")],2):e._e()])},n=[],o=(a("2397"),a("d225")),i=a("b0b4"),c=a("308d"),s=a("6bb5"),l=a("4e2b"),u=a("bd86"),d=a("9ab4"),f=a("60a3");function p(e,t,a){return t=Object(s["a"])(t),Object(c["a"])(e,v()?Reflect.construct(t,a||[],Object(s["a"])(e).constructor):t.apply(e,a))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var b=function(e){function t(){var e;Object(o["a"])(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return e=p(this,t,[].concat(r)),Object(u["a"])(e,"goback",void 0),Object(u["a"])(e,"butList",void 0),Object(u["a"])(e,"title",void 0),e}return Object(l["a"])(t,e),Object(i["a"])(t,[{key:"toggleClick",value:function(){this.$emit("toggleClick")}},{key:"goBack",value:function(){this.$router.go(-1)}}])}(f["c"]);Object(d["a"])([Object(f["b"])({default:!1})],b.prototype,"goback",void 0),Object(d["a"])([Object(f["b"])({default:!1})],b.prototype,"butList",void 0),Object(d["a"])([Object(f["b"])({default:"集团管理"})],b.prototype,"title",void 0),b=Object(d["a"])([Object(f["a"])({name:"Hamburger"})],b);var h=b,m=h,g=(a("0f65"),a("2877")),O=Object(g["a"])(m,r,n,!1,null,"47698cf5",null);t["a"]=O.exports},dba6:function(e,t,a){"use strict";a("b899")},de1a:function(e,t,a){"use strict";a.r(t);a("7f7f");var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{key:e.vueRest,staticClass:"addBrand-container"},[t("div",{key:e.restKey,staticClass:"container"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,inline:!0,"label-width":"180px"}},[t("div",[t("el-form-item",{attrs:{label:"Dish Name: ",prop:"name"}},[t("el-input",{attrs:{placeholder:"please input dish name",maxlength:"20"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"Dish Category",prop:"categoryId"}},[t("el-select",{attrs:{placeholder:"please select dish category"},model:{value:e.ruleForm.categoryId,callback:function(t){e.$set(e.ruleForm,"categoryId",t)},expression:"ruleForm.categoryId"}},e._l(e.dishList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("div",[t("el-form-item",{attrs:{label:"Unit Price: ",prop:"price"}},[t("el-input",{attrs:{placeholder:"please set unit price"},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1)],1),t("el-form-item",{attrs:{label:"Set Flavors"}},[t("el-form-item",[t("div",{staticClass:"flavorBox"},[0==e.dishFlavors.length?t("span",{staticClass:"addBut",on:{click:e.addFlavore}},[e._v("\n              + Add Flavors")]):e._e(),0!=e.dishFlavors.length?t("div",{staticClass:"flavor"},[t("div",{staticClass:"title"},[t("span",[e._v("Flavor Name(within 3 words)")])]),t("div",{staticClass:"cont"},e._l(e.dishFlavors,(function(a,r){return t("div",{key:r,staticClass:"items"},[t("div",{staticClass:"itTit"},[t("SelectInput",{attrs:{"dish-flavors-data":e.leftDishFlavors,index:r,value:a.name},on:{select:e.selectHandle}})],1),t("div",{staticClass:"labItems",staticStyle:{display:"flex"}},[e._l(a.value,(function(a,n){return t("span",{key:n},[e._v(e._s(a)+"\n                      "),t("i",{on:{click:function(t){return e.delFlavorLabel(r,n)}}},[e._v("X")])])})),t("div",{staticClass:"inputBox",style:e.inputStyle})],2),t("span",{staticClass:"delFlavor delBut non",on:{click:function(t){return e.delFlavor(a.name)}}},[e._v("Delete")])])})),0),this.leftDishFlavors.length&&this.dishFlavors.length<this.dishFlavorsData.length?t("div",{staticClass:"addBut",on:{click:e.addFlavore}},[e._v("\n                Add Flavors\n              ")]):e._e()]):e._e()])])],1),t("div",[t("el-form-item",{attrs:{label:"Dish Picture",prop:"image"}},[t("image-upload",{attrs:{"prop-image-url":e.imageUrl},on:{imageChange:e.imageChange}},[e._v("\n            Picture size must be less than 2M"),t("br"),e._v("\n            Supported picture type: PNG JPEG JPG"),t("br"),e._v("\n            Pixel recommendation: 200*200 or 300*300\n          ")])],1)],1),t("div",{staticClass:"address"},[t("el-form-item",{attrs:{label:"Dish Description: ",prop:"region"}},[t("el-input",{attrs:{type:"textarea",rows:3,maxlength:"200",placeholder:"Dish Description: no more than 200 words"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1),t("div",{staticClass:"subBox address"},[t("el-button",{on:{click:function(){return e.$router.back()}}},[e._v("\n          Cancel\n        ")]),t("el-button",{class:{continue:"add"===e.actionType},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n          Save\n        ")]),"add"==e.actionType?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm","goAnd")}}},[e._v("\n          Save and continue to add\n        ")]):e._e()],1)],1)],1)])},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("2397"),a("96cf"),a("3b8d")),i=a("75fc"),c=(a("20d6"),a("c5f6"),a("d225")),s=a("b0b4"),l=a("308d"),u=a("6bb5"),d=a("4e2b"),f=a("bd86"),p=a("9ab4"),v=a("60a3"),b=a("d666"),h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"selectInput"},[t("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"Please select flavors",clearable:"",readonly:""},on:{focus:function(t){return e.selectFlavor(!0)},blur:function(t){return e.outSelect(!1)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.mak&&e.dishFlavorsData.length?t("div",{staticClass:"flavorSelect"},[e._l(e.dishFlavorsData,(function(a,r){return t("span",{key:r,staticClass:"items",on:{click:function(t){return e.checkOption(a,r)}}},[e._v(e._s(a.name))])})),e.dishFlavorsData==[]?t("span",{staticClass:"none"},[e._v("No data")]):e._e()],2):e._e()],1)},m=[];function g(e,t,a){return t=Object(u["a"])(t),Object(l["a"])(e,O()?Reflect.construct(t,a||[],Object(u["a"])(e).constructor):t.apply(e,a))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}var y=function(e){function t(){var e;Object(c["a"])(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return e=g(this,t,[].concat(r)),Object(f["a"])(e,"selectFlavorsData",void 0),Object(f["a"])(e,"dishFlavorsData",void 0),Object(f["a"])(e,"value",void 0),Object(f["a"])(e,"index",void 0),Object(f["a"])(e,"keyValue",NaN),Object(f["a"])(e,"mak",!1),e}return Object(d["a"])(t,e),Object(s["a"])(t,[{key:"selectFlavor",value:function(e){this.mak=e}},{key:"outSelect",value:function(e){var t=this;setTimeout((function(){t.mak=e}),200)}},{key:"inputHandle",value:function(e){this.selectFlavor(!1)}},{key:"checkOption",value:function(e,t){this.$emit("select",e.name,this.index,t),this.keyValue=e.name}}])}(v["c"]);Object(p["a"])([Object(v["b"])({default:[]})],y.prototype,"selectFlavorsData",void 0),Object(p["a"])([Object(v["b"])({default:[]})],y.prototype,"dishFlavorsData",void 0),Object(p["a"])([Object(v["b"])({default:""})],y.prototype,"value",void 0),Object(p["a"])([Object(v["b"])({default:0})],y.prototype,"index",void 0),y=Object(p["a"])([Object(v["a"])({name:"selectInput"})],y);var j=y,F=j,k=(a("0ba6"),a("2877")),_=Object(k["a"])(F,h,m,!1,null,"02d45f12",null),A=_.exports,x=a("5aa9"),I=a("38b88"),D=a("5581");function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(f["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t=Object(u["a"])(t),Object(l["a"])(e,P()?Reflect.construct(t,a||[],Object(u["a"])(e).constructor):t.apply(e,a))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}var N=function(e){function t(){var e;Object(c["a"])(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return e=S(this,t,[].concat(r)),Object(f["a"])(e,"restKey",0),Object(f["a"])(e,"textarea",""),Object(f["a"])(e,"value",""),Object(f["a"])(e,"imageUrl",""),Object(f["a"])(e,"actionType",""),Object(f["a"])(e,"dishList",[]),Object(f["a"])(e,"dishFlavorsData",[]),Object(f["a"])(e,"dishFlavors",[]),Object(f["a"])(e,"leftDishFlavors",[]),Object(f["a"])(e,"vueRest","1"),Object(f["a"])(e,"index",0),Object(f["a"])(e,"inputStyle",{flex:1}),Object(f["a"])(e,"headers",{token:Object(D["b"])()}),Object(f["a"])(e,"ruleForm",{name:"",id:"",price:"",code:"",image:"",description:"",dishFlavors:[],status:!0,categoryId:""}),e}return Object(d["a"])(t,e),Object(s["a"])(t,[{key:"rules",get:function(){return{name:[{required:!0,validator:function(e,t,a){if(t){var r=/^([A-Za-z0-9\u4e00-\u9fa5]){2,20}$/;r.test(t)?a():a(new Error("菜品名称输入不符，请输入2-20个字符"))}else a(new Error("请输入菜品名称"))},trigger:"blur"}],categoryId:[{required:!0,message:"请选择菜品分类",trigger:"change"}],image:{required:!0,message:"菜品图片不能为空"},price:[{required:!0,validator:function(e,t,a){var r=/^([1-9]\d{0,5}|0)(\.\d{1,2})?$/;!r.test(t)||Number(t)<=0?a(new Error("菜品价格格式有误，请输入大于零且最多保留两位小数的金额")):a()},trigger:"blur"}],code:[{required:!0,message:"请填写商品码",trigger:"blur"}]}}},{key:"created",value:function(){this.getDishList(),this.getFlavorListHand(),this.actionType=this.$route.query.id?"edit":"add",this.$route.query.id&&this.init()}},{key:"mounted",value:function(){}},{key:"changeDishFlavors",value:function(){this.getLeftDishFlavors()}},{key:"getLeftDishFlavors",value:function(){var e=this,t=[];this.dishFlavorsData.map((function(a){-1===e.dishFlavors.findIndex((function(e){return a.name===e.name}))&&t.push(a)})),this.leftDishFlavors=t}},{key:"selectHandle",value:function(e,t,a){var r=Object(i["a"])(this.dishFlavors),n=this.dishFlavorsData.findIndex((function(t){return t.name===e}));r[t]=JSON.parse(JSON.stringify(this.dishFlavorsData[n])),this.dishFlavors=r}},{key:"init",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(I["h"])(this.$route.query.id).then((function(e){if(e&&e.data&&1===e.data.code){t.ruleForm=w({},e.data.data),t.ruleForm.price=String(e.data.data.price),t.ruleForm.status="1"==e.data.data.status,t.dishFlavors=e.data.data.flavors&&e.data.data.flavors.map((function(e){return w(w({},e),{},{value:JSON.parse(e.value)})}));t.getLeftDishFlavors(),t.imageUrl=e.data.data.image}else t.$message.error(e.data.msg)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addFlavore",value:function(){this.dishFlavors.push({name:"",value:[]})}},{key:"delFlavor",value:function(e){var t=this.dishFlavors.findIndex((function(t){return t.name===e}));this.dishFlavors.splice(t,1)}},{key:"delFlavorLabel",value:function(e,t){this.dishFlavors[e].value.splice(t,1)}},{key:"flavorPosition",value:function(e){this.index=e}},{key:"keyDownHandle",value:function(e){event&&(event.cancelBubble=!0,event.preventDefault(),event.stopPropagation()),""!=e.target.innerText.trim()&&(this.dishFlavors[this.index].flavorData.push(e.target.innerText),e.target.innerText="")}},{key:"getDishList",value:function(){var e=this;Object(I["f"])({type:1}).then((function(t){1===t.data.code?e.dishList=t&&t.data&&t.data.data:e.$message.error(t.data.msg)}))}},{key:"getFlavorListHand",value:function(){this.dishFlavorsData=[{name:"甜味",value:["无糖","少糖","半糖","多糖","全糖"]},{name:"温度",value:["热饮","常温","去冰","少冰","多冰"]},{name:"忌口",value:["不要葱","不要蒜","不要香菜","不要辣"]},{name:"辣度",value:["不辣","微辣","中辣","重辣"]}]}},{key:"submitForm",value:function(e,t){var a=this;this.$refs[e].validate((function(e){if(console.log(e,"valid"),!e)return!1;if(!a.ruleForm.image)return a.$message.error("菜品图片不能为空");var r=w({},a.ruleForm);r.status="add"===a.actionType?0:a.ruleForm.status?1:0,r.categoryId=a.ruleForm.categoryId,r.flavors=a.dishFlavors.map((function(e){return w(w({},e),{},{value:JSON.stringify(e.value)})})),delete r.dishFlavors,"add"==a.actionType?(delete r.id,Object(I["a"])(r).then((function(e){1===e.data.code?(a.$message.success("菜品添加成功！"),t?(a.dishFlavors=[],a.imageUrl="",a.ruleForm={name:"",id:"",price:"",code:"",image:"",description:"",dishFlavors:[],status:!0,categoryId:""},a.restKey++):a.$router.push({path:"/dish"})):a.$message.error(e.data.desc||e.data.msg)})).catch((function(e){a.$message.error("请求出错了："+e.message)}))):(delete r.createTime,delete r.updateTime,Object(I["e"])(r).then((function(e){e&&e.data&&1===e.data.code?(a.$router.push({path:"/dish"}),a.$message.success("菜品修改成功！")):a.$message.error(e.data.desc||e.data.msg)})).catch((function(e){a.$message.error("请求出错了："+e.message)})))}))}},{key:"imageChange",value:function(e){this.ruleForm.image=e}}])}(v["c"]);Object(p["a"])([Object(v["d"])("dishFlavors")],N.prototype,"changeDishFlavors",null),N=Object(p["a"])([Object(v["a"])({name:"addShop",components:{HeadLable:b["a"],SelectInput:A,ImageUpload:x["a"]}})],N);var B=N,E=B,U=(a("7dfb"),a("dba6"),Object(k["a"])(E,r,n,!1,null,"455d8ac9",null));t["default"]=U.exports},e421:function(e,t,a){},ec28:function(e,t,a){e.exports={menuBg:"#343744",menuText:"#bfcbd9",menuActiveText:"#ffc200"}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-13081ae8.ac837a7c.js.map